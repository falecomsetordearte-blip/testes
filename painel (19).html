<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Painel - Setor de Arte</title>
    <link rel="icon" type="image/svg+xml" href="https://setordearte.com.br/images/logo-redonda.svg">
    <link rel="stylesheet" href="style.css?v=1.1">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

    <div class="app-layout">
        <header class="app-header">
            <div class="container header-content">
                <img src="https://setordearte.com.br/images/logo-redonda.svg" alt="Logo Setor de Arte" class="app-logo">
                <div class="user-menu">
                    <span id="user-greeting">Olá!</span>
                    <button id="logout-button">Sair</button>
                </div>
            </div>
        </header>

        <main class="main-painel">
            <div class="container">
                <section class="saldo-section">
                    <div class="saldo-box">
                        <span class="saldo-label">Meu Saldo de Créditos</span>
                        <span id="saldo-valor" class="saldo-valor">R$ 0,00</span>
                    </div>
                    <div class="acoes-box">
                        <button class="btn-acao btn-add-credito">Adicionar Créditos</button>
                        <button class="btn-acao btn-novo-pedido"><strong>+</strong> Novo Pedido</button>
                    </div>
                </section>

                <section class="pedidos-section">
                    <div class="pedidos-header-bar">
                        <h2>Meus Pedidos</h2>
                        <div class="filtros-pedidos">
                            <input type="text" placeholder="Buscar por título ou ID..." id="search-input">
                            <select id="status-filter">
                                <option value="todos">Todos os Status</option>
                                <option value="pagamento">Aguardando Pagamento</option>
                                <option value="analise">Em Análise</option>
                                <option value="andamento">Em Andamento</option>
                                <option value="finalizado">Finalizado</option>
                                <option value="cancelado">Cancelado</option>
                                <option value="verificado">Verificado</option>
                            </select>
                        </div>
                    </div>
                    <div class="pedidos-list-header">
                        <div class="col-id">ID</div>
                        <div class="col-titulo">Título</div>
                        <div class="col-status">Status</div>
                        <div class="col-valor">Valor</div>
                        <div class="col-acoes">Ações</div>
                    </div>
                    <div id="pedidos-list-body" class="pedidos-list-body">
                        <div class="loading-pedidos">
                            <div class="spinner"></div>
                            <span>Carregando seus pedidos...</span>
                        </div>
                    </div>
                    
                    <!-- Controles de Paginação -->
                    <div id="pagination-container" class="pagination-container hidden">
                        <div class="pagination-info">
                            <span id="pagination-info-text">Mostrando 1-20 de 50 pedidos</span>
                        </div>
                        <div class="pagination-controls">
                            <button id="btn-first-page" class="pagination-btn" title="Primeira página">«</button>
                            <button id="btn-prev-page" class="pagination-btn" title="Página anterior">‹</button>
                            <span id="pagination-pages" class="pagination-pages"></span>
                            <button id="btn-next-page" class="pagination-btn" title="Próxima página">›</button>
                            <button id="btn-last-page" class="pagination-btn" title="Última página">»</button>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- MODAL DE NOVO PEDIDO - ESTRUTURA DO PAINEL 6 -->
    <div class="modal-overlay" id="modal-novo-pedido">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h3>Criar um Novo Pedido de Arte</h3>
                <button class="close-modal" title="Fechar">×</button>
            </div>
            <div class="modal-body-scrollable">
                <form id="novo-pedido-form" class="form-grid-modified">
                    <!-- Botão de Explicação -->
                    <div class="form-group full-width">
                        <button type="button" id="btn-assistir-explicacao" class="btn-acao" style="width: 100%; margin-bottom: 15px;">Assistir Explicação</button>
                    </div>
                    
                    <!-- Container do Vídeo -->
                    <div id="video-explicacao-container" class="hidden full-width" style="margin-bottom: 20px;">
                        <iframe src="https://www.youtube.com/embed/lae4DJIYXoA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    
                    <!-- Feedback de Erro -->
                    <div id="pedido-form-error" class="form-feedback error hidden full-width"></div>
                    
                    <!-- PRIMEIRA LINHA: 4 CAMPOS EM CIMA -->
                    <div class="form-row-four">
                        <div class="form-group">
                            <label for="pedido-titulo">Título do Pedido</label>
                            <input type="text" id="pedido-titulo" placeholder="Ex: Cartão de Visitas - João da Silva" required>
                        </div>
                        <div class="form-group">
                            <label for="cliente-final-nome">Nome do Cliente Final</label>
                            <input type="text" id="cliente-final-nome" placeholder="quem vai aprovar a arte" required>
                        </div>
                        <div class="form-group">
                            <label for="cliente-final-wpp">WhatsApp do Cliente Final</label>
                            <input type="tel" id="cliente-final-wpp" placeholder="(xx) 99999-9999" required>
                        </div>
                        <div class="form-group">
                            <label for="pedido-valor">Valor para o Designer (R$)</label>
                            <input type="number" id="pedido-valor" placeholder="Mínimo R$ 35,00" min="35" step="5" required>
                        </div>
                    </div>

                    <!-- CAMPO DE BRIEFING (MANTIDO) -->
                    <div class="form-group full-width">
                        <label for="pedido-briefing">Briefing Completo</label>
                        <textarea id="pedido-briefing" rows="5" placeholder="Descreva tudo: medidas, textos, cores, etc." required></textarea>
                    </div>

                    <!-- CAMPO ARQUIVOS AUXILIARES (LINK) -->
                    <div class="form-group full-width">
                        <label for="pedido-arquivos-link">Arquivos Auxiliares (Link)</label>
                        <input type="url" id="pedido-arquivos-link" placeholder="https://drive.google.com/...">
                        <small class="field-help">Opcional: Cole aqui o link para arquivos auxiliares (Google Drive, Dropbox, etc.)</small>
                    </div>

                    <!-- CAMPO FORMATO DESEJADO -->
                    <div class="form-group full-width">
                        <label for="pedido-formato">Formato Desejado</label>
                        <input type="text" id="pedido-formato" placeholder="PDF, CDR, etc..." required>
                    </div>

                    <!-- BOTÃO DE SUBMIT -->
                    <button type="submit" class="btn-submit full-width">Criar Pedido</button>
                </form>
            </div>
        </div>
    </div>

    <!-- MODAL DE ADQUIRIR CRÉDITOS -->
    <div class="modal-overlay" id="modal-adquirir-creditos">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Adicionar Créditos</h3>
                <button class="close-modal" title="Fechar">×</button>
            </div>
            
            <!-- O FORMULÁRIO AGORA ENVOLVE O BODY E O FOOTER -->
            <form id="adquirir-creditos-form">
                <div class="modal-body">
                    <div id="creditos-form-error" class="form-feedback error hidden"></div>
                    <div class="form-group">
                        <label for="creditos-valor">Valor (R$)</label>
                        <input type="number" id="creditos-valor" placeholder="Ex: 100,00" min="5" step="5" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <!-- O botão agora é type="submit" e está DENTRO do form -->
                    <button type="submit" class="btn-pagar">Pagar</button>
                </div>
            </form>

        </div>
    </div>
    <!-- NOVO: MODAL DE PROCESSAMENTO COM TIMER -->
<div class="modal-overlay hidden" id="processing-modal">
    <div class="modal-content" style="max-width: 400px; text-align: center;">
        <div id="processing-modal-content" class="modal-body" style="padding: 40px 25px;">
            <!-- O conteúdo aqui será alterado dinamicamente via JS -->
            <div class="spinner"></div>
            <h3 style="margin-top: 20px; font-size: 22px;">Processando Pagamento</h3>
            <p style="color: var(--cinza-texto); margin-bottom: 25px;">Isso levará cerca de 30 segundos. Por favor, não feche ou atualize a página.</p>
            <div style="font-size: 28px; font-weight: 700; color: var(--azul-principal);">
                <span id="countdown-timer">30</span>s
            </div>
        </div>
    </div>
</div>
    
    <script src="script.js?v=1.1"></script>
    <script src="https://unpkg.com/imask"></script>
    <script src="bitrix24-widget.js"></script>
</body>
</html>

