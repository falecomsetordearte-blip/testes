generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"] // Habilita o suporte para Vercel Postgres
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTG-RES_URL_NON_POOLING")
}

model DesignerFinanceiro {
  designer_id         Int       @id
  senha_hash          String?   // Para armazenar a senha criptografada
  reset_token         String?   @unique // Token para redefinir senha
  reset_token_expires DateTime? // Data de expiração do token
  saldo_disponivel    Decimal   @default(0.00) @db.Decimal(10, 2)
  saldo_pendente      Decimal   @default(0.00) @db.Decimal(10, 2)
  ultimo_saque_em     DateTime?
  criado_em           DateTime  @default(now())
  atualizado_em       DateTime  @updatedAt
  chave_pix           String?
  pontuacao           Int       @default(0)

  @@map("designers_financeiro")
}

model Empresa {
  id            Int      @id @default(autoincrement())
  cnpj          String   @unique @db.VarChar(18)
  nome_fantasia String   @db.VarChar(255)
  logo          String?  @db.Text
  whatsapp      String?  @db.VarChar(20)
  criado_em     DateTime @default(now()) @db.Timestamptz(6)
  atualizado_em DateTime @updatedAt @db.Timestamptz(6)
  saldo_devedor Decimal  @default(0.00) @db.Decimal(10, 2)

  @@map("empresas")
}