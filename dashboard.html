<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Setor de Arte</title>
    <!-- Ícone e CSS padronizados -->
    <link rel="icon" type="image/svg+xml" href="/images/logo-fundo-claro-100x100.png">
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

    <div class="app-layout-grid">
        <!-- Sidebar será injetada aqui -->
        <div id="sidebar-placeholder"></div>

        <!-- Wrapper para o conteúdo que rola -->
        <div class="app-content-wrapper">
            <!-- Header será injetado aqui -->
            <div id="header-placeholder"></div>

            <!-- Conteúdo específico do Dashboard -->
            <main class="app-content">
                <div class="container">
                    
                    <!-- 1. Cabeçalho de Boas-Vindas e Ações Rápidas -->
                    <section class="dashboard-header">
                        <div class="welcome-message">
                            <h1 id="welcome-user-name">Carregando...</h1>
                            <p>Aqui está um resumo da sua atividade na plataforma.</p>
                        </div>
                        <div class="acoes-box">
                            <a href="painel.html" class="btn btn-secondary"><i class="fa-solid fa-list-check"></i> Ver Todos Pedidos</a>
                            <a href="#" class="btn btn-primary btn-novo-pedido"><strong>+</strong> Novo Pedido</a>
                        </div>
                    </section>

                    <!-- 2. Grid de Métricas Rápidas (KPIs) -->
                    <section class="dashboard-grid">
                        <div class="dash-card">
                            <i class="fa-solid fa-wallet card-icon" style="color: #27ae60;"></i>
                            <span class="dash-card-label">Saldo de Créditos</span>
                            <span class="dash-card-value" id="saldo-valor-dash">R$ 0,00</span>
                        </div>
                        <div class="dash-card">
                            <i class="fa-solid fa-hourglass-half card-icon" style="color: #3498db;"></i>
                            <span class="dash-card-label">Pedidos em Andamento</span>
                            <span class="dash-card-value" id="pedidos-andamento-dash">0</span>
                        </div>
                        <div class="dash-card">
                             <i class="fa-solid fa-circle-check card-icon" style="color: #8e44ad;"></i>
                            <span class="dash-card-label">Pedidos Concluídos (Total)</span>
                            <span class="dash-card-value" id="pedidos-concluidos-dash">0</span>
                        </div>
                        <div class="dash-card">
                            <i class="fa-solid fa-headset card-icon" style="color: #e67e22;"></i>
                            <span class="dash-card-label">Suporte</span>
                            <a href="ajuda.html" class="dash-card-link">Acessar Ajuda</a>
                        </div>
                    </section>

                    <!-- 3. Layout de duas colunas para Atividade e Treinamentos -->
                    <section class="dashboard-columns">
                        <!-- Coluna Principal: Pedidos Recentes -->
                        <div class="main-panel">
                            <div class="panel-header">
                                <h2><i class="fa-solid fa-clock-rotate-left"></i> Atividade Recente</h2>
                                <a href="painel.html" class="view-all-link">Ver todos →</a>
                            </div>
                            <div id="recentes-pedidos-list">
                                <!-- Pedidos recentes serão inseridos aqui pelo JS -->
                                <div class="loading-pedidos"><div class="spinner"></div></div>
                            </div>
                        </div>

                        <!-- Coluna Lateral: Treinamentos -->
                        <div class="side-panel">
                            <div class="panel-header">
                                <h2><i class="fa-solid fa-graduation-cap"></i> Treinamentos</h2>
                            </div>
                            <div class="training-list">
                                <a href="#" class="training-item">
                                    <i class="fa-solid fa-circle-play"></i>
                                    <div class="training-info">
                                        <h4>Como criar seu primeiro pedido</h4>
                                        <p>Aprenda o passo a passo para enviar uma arte.</p>
                                    </div>
                                </a>
                                <a href="#" class="training-item">
                                    <i class="fa-solid fa-circle-play"></i>
                                    <div class="training-info">
                                        <h4>Entendendo os status dos pedidos</h4>
                                        <p>Saiba o que cada etapa significa.</p>
                                    </div>
                                </a>
                                <a href="#" class="training-item">
                                    <i class="fa-solid fa-file-invoice-dollar"></i>
                                    <div class="training-info">
                                        <h4>Adicionando e utilizando créditos</h4>
                                        <p>Veja como é fácil gerenciar seu saldo.</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </section>

                </div>
            </main>

            <!-- Footer será injetado aqui -->
            <div id="footer-placeholder"></div>
        </div>
    </div>
    
    <!-- MODAL DE NOVO PEDIDO COPIADO DO painel.html -->
    <div class="modal-overlay" id="modal-novo-pedido">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h3>Criar um Novo Pedido de Arte</h3>
                <button class="close-modal" title="Fechar">×</button>
            </div>
            <form id="novo-pedido-form">
                <div class="modal-body">
                    <div id="pedido-form-error" class="form-feedback error hidden"></div>
                    
                    <div class="video-explicativo-wrapper">
                        <a href="#" id="video-explicativo-toggle" class="video-toggle-link">Assistir Vídeo Explicativo</a>
                        <div id="video-explicativo-container" class="video-container hidden">
                            <iframe width="100%" height="315" src="https://www.youtube.com/embed/lae4DJIYXoA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                    </div>

                    <div class="form-row form-row-four">
                        <div class="form-group">
                            <label for="pedido-titulo">Título do Pedido</label>
                            <input type="text" id="pedido-titulo" required>
                        </div>
                        <div class="form-group">
                            <label for="cliente-final-nome">Nome do Cliente Final</label>
                            <input type="text" id="cliente-final-nome" required>
                        </div>
                        <div class="form-group">
                            <label for="cliente-final-wpp">WhatsApp do Cliente Final</label>
                            <input type="tel" id="cliente-final-wpp" required placeholder="(00) 00000-0000">
                        </div>
                        <div class="form-group">
                            <label for="pedido-valor">Valor para o Designer (R$)</label>
                            <input type="number" id="pedido-valor" min="35" step="5" required>
                        </div>
                    </div>

                    <div class="form-row form-row-three">
                        <div class="form-group">
                            <label for="pedido-impressora">Impressora</label>
                            <select id="pedido-impressora" required>
                                <option value="">Carregando...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="pedido-material">Material</label>
                            <select id="pedido-material" required>
                                <option value="">Carregando...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="pedido-tipo-entrega">Tipo de Entrega</label>
                            <select id="pedido-tipo-entrega" required>
                                <option value="">Carregando...</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <h4 class="materiais-header">Materiais do Pedido</h4>
                        <div id="materiais-container">
                            <div class="material-item">
                                <label class="item-label">Item 1</label>
                                <div class="form-group">
                                    <label for="material-descricao-1">Descreva o Material</label>
                                    <input type="text" id="material-descricao-1" class="material-descricao" placeholder="Ex. Banner 60x100 3 unidades" required>
                                </div>
                                <div class="form-group">
                                    <label for="material-detalhes-1">Como o cliente deseja a arte?</label>
                                    <textarea id="material-detalhes-1" class="material-detalhes" rows="3" required></textarea>
                                </div>
                            </div>
                        </div>
                        <button type="button" id="btn-add-material" class="btn btn-light btn-add-material">+ Adicionar Material</button>
                    </div>
                    
                    <div class="form-group" style="margin-top: 25px;">
                        <label for="pedido-formato">Formato Desejado</label>
                        <input type="text" id="pedido-formato" placeholder="Ex: PDF, CDR, AI" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary btn-lg w-100">Criar Pedido</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/layout.js"></script>
    <script src="https://unpkg.com/imask"></script> <!-- Adicionado iMask para o modal funcionar -->
    <script src="/script.js"></script> <!-- Adicionado para acessar a lógica do modal -->
    <script src="/dashboard.js"></script> <!-- Novo script para esta página -->

</body>
</html>