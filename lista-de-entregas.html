<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Entregas</title>
    <style>
        /* CSS INLINE */
        :root {
            --primary-bg: #f0f2f5;
            --card-bg: #ffffff;
            --text-main: #333;
            --accent-color: #007bff;
            --progress-bg: #e0e0e0;
            --progress-fill: #28a745; /* Verde */
            --header-height: 100px;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-main);
            margin: 0;
            padding: 0;
        }

        /* --- HEADER FIXO --- */
        .fixed-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--header-height);
            background-color: #fff;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 10px 20px;
        }

        h1 {
            margin: 0 0 10px 0;
            font-size: 1.3rem;
            text-transform: uppercase;
            color: #444;
            letter-spacing: 1px;
        }

        /* --- BARRA DE PROGRESSO COM TEXTO DUPLO --- */
        .progress-container {
            width: 100%;
            max-width: 800px;
            background-color: var(--progress-bg);
            border-radius: 25px;
            height: 35px; /* Altura da barra */
            position: relative; /* Contexto para os absolutos */
            overflow: hidden; /* Garante bordas redondas */
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        /* A Barra Verde (Fundo animado) */
        .progress-bar-bg {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 0%; /* JS controla isso */
            background-color: var(--progress-fill);
            transition: width 0.4s cubic-bezier(0.25, 1, 0.5, 1);
            z-index: 1; /* Fica acima do fundo cinza */
            
            /* Padrão de Listras (Stripes) */
            background-image: linear-gradient(
                45deg, 
                rgba(255, 255, 255, 0.25) 25%, 
                transparent 25%, 
                transparent 50%, 
                rgba(255, 255, 255, 0.25) 50%, 
                rgba(255, 255, 255, 0.25) 75%, 
                transparent 75%, 
                transparent
            );
            background-size: 40px 40px;
            animation: move-stripes 2s linear infinite;
        }

        @keyframes move-stripes {
            0% { background-position: 40px 0; }
            100% { background-position: 0 0; }
        }

        /* Estilo base para os textos (centralização) */
        .progress-text {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
            white-space: nowrap; /* Não quebrar linha */
        }

        /* CAMADA 1: Texto Verde (Fundo) */
        /* Aparece quando o fundo é cinza/branco */
        .text-layer-back {
            color: var(--progress-fill); /* Texto Verde */
            z-index: 2;
        }

        /* CAMADA 2: Texto Branco (Frente) */
        /* Aparece quando o fundo é a barra verde */
        .text-layer-front {
            color: #ffffff; /* Texto Branco */
            z-index: 3;
            /* O segredo: Clip-path vai recortar este texto */
            clip-path: inset(0 100% 0 0); 
            transition: clip-path 0.4s cubic-bezier(0.25, 1, 0.5, 1);
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        /* --- GRID E LAYOUT --- */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
            margin-top: var(--header-height);
        }

        .job-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-top: 5px solid var(--accent-color);
            transition: transform 0.2s;
            display: flex;
            flex-direction: column;
        }

        .job-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }

        .main-task-label {
            display: flex;
            align-items: center;
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            color: #2c3e50;
        }

        .main-task-label input { width: 22px; height: 22px; margin-right: 12px; }

        ul {
            list-style-type: none;
            padding-left: 5px;
            margin: 0;
            flex-grow: 1;
        }

        li { margin-bottom: 12px; }

        .subtask-label {
            display: flex;
            align-items: flex-start;
            cursor: pointer;
            font-size: 0.95rem;
            color: #555;
            line-height: 1.4;
            transition: color 0.2s;
        }

        .subtask-label:hover { color: var(--accent-color); }

        .subtask-label input {
            margin-top: 3px;
            margin-right: 10px;
            transform: scale(1.3);
            cursor: pointer;
            flex-shrink: 0;
            accent-color: var(--accent-color);
        }

        .completed {
            text-decoration: line-through;
            color: #aaa;
        }

        .footer-actions {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px;
        }

        .btn-reset {
            background-color: transparent;
            color: #d63031;
            border: 1px solid #d63031;
            padding: 10px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        .btn-reset:hover { background-color: #d63031; color: white; }

    </style>
</head>
<body>

    <!-- BARRA FIXA -->
    <div class="fixed-header">
        <h1>Lista de Entregas</h1>
        
        <div class="progress-container">
            <!-- Camada da Barra Verde (Visual) -->
            <div class="progress-bar-bg" id="progress-bar-visual"></div>
            
            <!-- Camada de Texto 1 (Verde - Fica no fundo) -->
            <div class="progress-text text-layer-back">
                <span id="txt-percentage-back">0% Concluído</span>
            </div>
            
            <!-- Camada de Texto 2 (Branco - Fica na frente e é recortada) -->
            <div class="progress-text text-layer-front" id="text-mask">
                <span id="txt-percentage-front">0% Concluído</span>
            </div>
        </div>
    </div>

    <!-- CONTEÚDO -->
    <div class="grid-container">

        <!-- FLEMING AFONSO CLAUDIO -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_fleming_ac">
                <span>FLEMING AFONSO CLAUDIO</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_fleming_ac_1"><span>Revestir os adesivos das paredes com jateado</span></label></li>
                <li><label class="subtask-label"><input type="checkbox" id="t_fleming_ac_2"><span>Aplicar logo alto relevo na recepção</span></label></li>
            </ul>
        </div>

        <!-- CINFONO NOVA AUDIO -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_cinfono">
                <span>CINFONO NOVA AUDIO</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_cinfono_1"><span>Aplicar adesivos vidro Cinfono</span></label></li>
                <li><label class="subtask-label"><input type="checkbox" id="t_cinfono_2"><span>Instalar letras alto relevo galeria e prédio</span></label></li>
                <li><label class="subtask-label"><input type="checkbox" id="t_cinfono_3"><span>Instalar placa Nova Audio</span></label></li>
            </ul>
        </div>

        <!-- FLEMING SANTA MARIA -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_fleming_sm">
                <span>FLEMING SANTA MARIA</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_fleming_sm_1"><span>Aplicar adesivo jateado nos adesivos de parede</span></label></li>
                <li><label class="subtask-label"><input type="checkbox" id="t_fleming_sm_2"><span>Instalar refletores na placa existente</span></label></li>
            </ul>
        </div>

        <!-- BM SANTA MARIA -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_bm_sm">
                <span>BM SANTA MARIA</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_bm_sm_1"><span>Instalar placa de fachada</span></label></li>
            </ul>
        </div>

        <!-- EDIFÍCIO GRIGIO -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_grigio">
                <span>EDIFÍCIO GRIGIO</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_grigio_1"><span>Instalar letreiro da fachada do prédio</span></label></li>
            </ul>
        </div>

        <!-- CICLO VILA -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_ciclo">
                <span>CICLO VILA</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_ciclo_1"><span>Remover adesivos da fachada</span></label></li>
                <li><label class="subtask-label"><input type="checkbox" id="t_ciclo_2"><span>Aplicar novos adesivos na placa</span></label></li>
            </ul>
        </div>

        <!-- POUSADA VALE DA MATA -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_pousada">
                <span>POUSADA VALE DA MATA</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_pousada_1"><span>Produzir painel de ACM</span></label></li>
                <li><label class="subtask-label"><input type="checkbox" id="t_pousada_2"><span>Aplicar a logo alto relevo no painel</span></label></li>
                <li><label class="subtask-label"><input type="checkbox" id="t_pousada_3"><span>Produzir estrutura se necessário</span></label></li>
                <li><label class="subtask-label"><input type="checkbox" id="t_pousada_4"><span>Reposicionar toco da placa no local</span></label></li>
            </ul>
        </div>

        <!-- PLOTAGEM ÔNIBUS -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_onibus">
                <span>PLOTAGEM ÔNIBUS</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_onibus_1"><span>Produzir adesivos</span></label></li>
                <li><label class="subtask-label"><input type="checkbox" id="t_onibus_2"><span>Aplicar verniz</span></label></li>
                <li><label class="subtask-label"><input type="checkbox" id="t_onibus_3"><span>Envelopar ônibus</span></label></li>
            </ul>
        </div>

        <!-- LCM -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_lcm">
                <span>LCM</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_lcm_1"><span>Aplicar adesivos nas placas de aço</span></label></li>
            </ul>
        </div>

        <!-- EDP -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_edp">
                <span>EDP</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_edp_1"><span>Cortar 30 chapas de aço (tamanho a definir)</span></label></li>
                <li><label class="subtask-label"><input type="checkbox" id="t_edp_2"><span>Aplicar adesivos nas chapas</span></label></li>
            </ul>
        </div>

        <!-- CANAL -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_canal">
                <span>CANAL – LEONARDO CAFÉ</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_canal_1"><span>(definir tarefas)</span></label></li>
            </ul>
        </div>

        <!-- MARIANA -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_mariana">
                <span>MARIANA VENTURIM</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_mariana_1"><span>(definir tarefas)</span></label></li>
            </ul>
        </div>

        <!-- RENATO -->
        <div class="job-card">
            <label class="main-task-label">
                <input type="checkbox" id="job_renato">
                <span>RENATO BLACK PIANO</span>
            </label>
            <ul>
                <li><label class="subtask-label"><input type="checkbox" id="t_renato_1"><span>(definir tarefas)</span></label></li>
            </ul>
        </div>

        <!-- Botão Limpar -->
        <div class="footer-actions">
            <button class="btn-reset" onclick="resetarTudo()">Reiniciar Progresso</button>
        </div>

    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            
            checkboxes.forEach(function(checkbox) {
                const savedState = localStorage.getItem(checkbox.id);
                if (savedState === 'true') {
                    checkbox.checked = true;
                }
                applyVisualState(checkbox);
                
                checkbox.addEventListener('change', function() {
                    localStorage.setItem(this.id, this.checked);
                    applyVisualState(this);
                    updateProgressBar();
                });
            });

            updateProgressBar();
        });

        function applyVisualState(checkbox) {
            const textSpan = checkbox.nextElementSibling;
            if (checkbox.checked) {
                textSpan.classList.add('completed');
            } else {
                textSpan.classList.remove('completed');
            }
        }

        function updateProgressBar() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const total = checkboxes.length;
            const checked = document.querySelectorAll('input[type="checkbox"]:checked').length;
            
            let percentage = 0;
            if (total > 0) {
                percentage = Math.round((checked / total) * 100);
            }

            const percentageText = percentage + '% Concluído';

            // 1. Atualiza a largura da barra visual (verde)
            const barVisual = document.getElementById('progress-bar-visual');
            barVisual.style.width = percentage + '%';

            // 2. Atualiza o texto das duas camadas
            document.getElementById('txt-percentage-back').innerText = percentageText;
            document.getElementById('txt-percentage-front').innerText = percentageText;

            // 3. Atualiza o recorte (Clip Path) do texto branco
            // Inset(Topo Direita Baixo Esquerda). 
            // Se temos 10% completo, escondemos 90% da direita.
            const percentageToHide = 100 - percentage;
            const textMask = document.getElementById('text-mask');
            textMask.style.clipPath = `inset(0 ${percentageToHide}% 0 0)`;
        }

        function resetarTudo() {
            if(confirm("Deseja zerar toda a lista?")) {
                const checkboxes = document.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(cb => {
                    cb.checked = false;
                    localStorage.removeItem(cb.id);
                    applyVisualState(cb);
                });
                updateProgressBar();
            }
        }
    </script>
</body>
</html>